<%- include(`../partials/head`) %>
<%- include(`../partials/header`) %>
<div>
<table class="table align-middle mb-0 bg-white" id="userTable">
    <thead class="bg-light">
      <tr>
        <th class="th-sm">Name</th>
        <th class="th-sm">Title</th>
        <th class="th-sm">Role</th>
        <th class="th-sm">Actions</th>
      </tr>
    </thead>
    <tbody>
    <% userList.forEach((userList, index) => { %>
      <tr>
        <td>
          <div class="d-flex align-items-center">
            <div class="ms-3">
              <p class="fw-bold mb-1"><%= userList.firstName %> <%= userList.lastName %></p>
              <p class="text-muted mb-0"><%= userList.email %></p>
            </div>
          </div>
        </td>
        <td>
          <p class="fw-normal mb-1"><%= userList.title %></p>
        </td>
        <td><%= userList.role %></td>
        <td>
          <div class="d-flex align-items-center">
            <div class="ms-3">
            <% if(role === `Admin`) { %> 
            <p><a href="/user/<%= userList._id %>/edit" class="btn btn-link btn-sm btn-rounded">
                Edit
            </a></p>
            <% } %>
            <p><a href="/user/<%= userList._id %>/filtered" class="btn btn-link btn-sm btn-rounded">
                Assigned Bugs
            </a></p>
            </div> 
          </div>
        </td>
      </tr>
    <% }) %> 
    </tbody>
</table>
</div>

<script>
    $(document).ready( function () {
    $('#userTable').DataTable();
    } );
</script>
<%- include(`../partials/footer`) %>